<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>RSVP Reading Speed Test</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: 'Inter', Arial, sans-serif;
      background: linear-gradient(120deg, #0f172a 0%, #1e293b 100%);
      color: #e0e7ef;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
    }
    .container {
      background: #334155;
      border-radius: 16px;
      box-shadow: 0 2px 12px rgba(30,41,59,0.18);
      max-width: 500px;
      margin: 2rem auto;
      padding: 2rem;
      text-align: center;
    }
    h1 {
      color: #60a5fa;
      margin-top: 2rem;
      margin-bottom: 1rem;
    }
    #rsvp-word {
      font-size: 2.5rem;
      font-weight: bold;
      margin: 2rem 0;
      color: #38bdf8;
      min-height: 3.5rem;
      letter-spacing: 2px;
    }
    .controls {
      margin: 1.5rem 0;
      display: flex;
      flex-direction: column;
      gap: 1rem;
      align-items: center;
    }
    label {
      color: #e0e7ef;
      font-weight: 500;
    }
    input[type="number"] {
      width: 80px;
      padding: 0.3em 0.5em;
      border-radius: 8px;
      border: none;
      font-size: 1em;
      margin-left: 0.5em;
    }
    button {
      padding: 0.6em 1.4em;
      border-radius: 30px;
      background: #2563eb;
      color: #fff;
      font-weight: 600;
      border: none;
      cursor: pointer;
      transition: background 0.2s, box-shadow 0.2s;
      box-shadow: 0 2px 8px rgba(37,99,235,0.08);
    }
    button:hover {
      background: #1e40af;
    }
    #result {
      margin-top: 1.5rem;
      color: #60a5fa;
      font-size: 1.2rem;
      font-weight: 600;
    }
    #api-key {
      width: 220px;
      margin-left: 0.5em;
      border-radius: 8px;
      border: none;
      padding: 0.3em 0.5em;
      font-size: 1em;
    }
    #passage {
      margin: 1.5rem 0 0 0;
      color: #94a3b8;
      font-size: 0.95em;
      display: none;
      text-align: left;
      background: #222c3a;
      border-radius: 10px;
      padding: 1em;
      word-break: break-word;
    }
    .top-buttons {
      display: flex;
      gap: 1rem;
      justify-content: flex-start;
      align-items: flex-start;
      margin-top: 2rem;
      margin-left: 2rem;
        position: static; /* Remove any absolute/fixed positioning */
    }
    .top-buttons a {
      padding: 0.6em 1.4em;
      border-radius: 30px;
      background: #2563eb;
      color: #fff;
      text-decoration: none;
      font-weight: 600;
      transition: background 0.2s, box-shadow 0.2s;
      box-shadow: 0 2px 8px rgba(37,99,235,0.08);
    }
    .top-buttons a:hover {
      background: #1e40af;
      box-shadow: 0 4px 16px rgba(37,99,235,0.15);
    }
    .social-icons {
      position: absolute;
      top: 2rem;
      right: 2rem;
      display: flex;
      gap: 1rem;
      z-index: 100;
    }
    .icon-link svg {
      display: block;
      transition: transform 0.2s, filter 0.2s;
      filter: drop-shadow(0 2px 8px rgba(30,41,59,0.18));
    }
    .icon-link:hover svg {
      transform: scale(1.15) rotate(-8deg);
      filter: drop-shadow(0 4px 16px #60a5fa);
    }
  </style>
</head>
<body>
  <div class="top-buttons">
    <a href="https://nitration.xyz" class="home-button">Home</a>
    <a href="https://discord.gg/WqtX3cEx4y" class="discord-button">Discord</a>
    <a href="https://nitration.xyz/projects/" class="projects-button">Projects</a>
  </div>
  <!-- Social Icons Top Right -->
  <div class="social-icons">
    <a href="https://github.com/Nitrationz" target="_blank" title="GitHub" class="icon-link" aria-label="GitHub">
      <svg width="28" height="28" viewBox="0 0 24 24" fill="#e0e7ef" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 .5C5.73.5.5 5.73.5 12c0 5.08 3.29 9.39 7.86 10.91.58.11.79-.25.79-.56 0-.28-.01-1.02-.02-2-3.2.7-3.88-1.54-3.88-1.54-.53-1.34-1.3-1.7-1.3-1.7-1.06-.72.08-.71.08-.71 1.17.08 1.78 1.2 1.78 1.2 1.04 1.78 2.73 1.27 3.4.97.11-.75.41-1.27.74-1.56-2.56-.29-5.26-1.28-5.26-5.7 0-1.26.45-2.29 1.19-3.1-.12-.29-.52-1.46.11-3.05 0 0 .98-.31 3.2 1.18a11.1 11.1 0 0 1 2.92-.39c.99 0 1.99.13 2.92.39 2.22-1.49 3.2-1.18 3.2-1.18.63 1.59.23 2.76.11 3.05.74.81 1.19 1.84 1.19 3.1 0 4.43-2.7 5.41-5.27 5.7.42.36.79 1.09.79 2.2 0 1.59-.01 2.87-.01 3.26 0 .31.21.68.8.56C20.71 21.39 24 17.08 24 12c0-6.27-5.23-11.5-12-11.5z"/>
      </svg>
    </a>
    <a href="https://www.youtube.com/channel/UCFL6Y3K45XGNZAJ-un4j9hw" target="_blank" title="YouTube" class="icon-link" aria-label="YouTube">
      <svg width="28" height="28" viewBox="0 0 24 24" fill="#e0e7ef" xmlns="http://www.w3.org/2000/svg">
        <path d="M23.498 6.186a2.997 2.997 0 0 0-2.112-2.12C19.228 3.5 12 3.5 12 3.5s-7.228 0-9.386.566a2.997 2.997 0 0 0-2.112 2.12C0 8.36 0 12 0 12s0 3.64.502 5.814a2.997 2.997 0 0 0 2.112 2.12C4.772 20.5 12 20.5 12 20.5s7.228 0 9.386-.566a2.997 2.997 0 0 0 2.112-2.12C24 15.64 24 12 24 12s0-3.64-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
      </svg>
    </a>
    <a href="https://x.com/Nitrotez" target="_blank" title="Twitter" class="icon-link" aria-label="Twitter">
      <svg width="28" height="28" viewBox="0 0 24 24" fill="#e0e7ef" xmlns="http://www.w3.org/2000/svg">
        <path d="M22.46 5.924c-.793.352-1.645.59-2.54.698a4.48 4.48 0 0 0 1.965-2.475 8.94 8.94 0 0 1-2.828 1.08A4.48 4.48 0 0 0 11.1 9.03a12.72 12.72 0 0 1-9.24-4.685 4.48 4.48 0 0 0 1.39 5.98A4.44 4.44 0 0 1 1.64 9.1v.057a4.48 4.48 0 0 0 3.59 4.39c-.4.11-.82.17-1.25.17-.31 0-.6-.03-.89-.08a4.48 4.48 0 0 0 4.18 3.11A8.98 8.98 0 0 1 2 19.54a12.67 12.67 0 0 0 6.88 2.02c8.26 0 12.78-6.84 12.78-12.78 0-.19-.01-.37-.02-.56a9.22 9.22 0 0 0 2.26-2.35z"/>
      </svg>
    </a>
  </div>
  <h1>RSVP Reading Speed Test</h1>
  <div class="container">
    <div class="controls">
      <div>
        <label for="wpm">WPM:</label>
        <input type="number" id="wpm" min="100" max="1200" value="300">
      </div>
      <div>
        <label for="api-key">OpenAI API Key:</label>
        <input type="password" id="api-key" placeholder="sk-...">
      </div>
      <button id="generate">Generate Passage</button>
      <button id="start" disabled>Start</button>
      <button id="pause" disabled>Pause</button>
      <button id="show-passage" disabled>Show Passage</button>
    </div>
    <div id="rsvp-word"></div>
    <div id="result"></div>
    <div id="passage"></div>
  </div>
  <script>
    let words = [];
    let current = 0;
    let interval = null;
    let startTime = null;
    let endTime = null;
    let passage = '';
    let paused = false;

    const wpmInput = document.getElementById('wpm');
    const apiKeyInput = document.getElementById('api-key');
    const generateBtn = document.getElementById('generate');
    const startBtn = document.getElementById('start');
    const pauseBtn = document.getElementById('pause');
    const showPassageBtn = document.getElementById('show-passage');
    const rsvpWord = document.getElementById('rsvp-word');
    const resultDiv = document.getElementById('result');
    const passageDiv = document.getElementById('passage');

    async function fetchAIPassage() {
      const apiKey = apiKeyInput.value.trim();
      if (!apiKey) {
        alert('Please enter your OpenAI API key.');
        return null;
      }
      const prompt = "Generate a random, interesting, and readable English passage of about 60-80 words for a reading speed test. Avoid technical jargon and keep it general.";
      try {
        const response = await fetch("https://api.openai.com/v1/chat/completions", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": "Bearer " + apiKey
          },
          body: JSON.stringify({
            model: "gpt-3.5-turbo",
            messages: [{role: "user", content: prompt}],
            max_tokens: 120,
            temperature: 0.8
          })
        });
        const data = await response.json();
        if (data.choices && data.choices[0] && data.choices[0].message && data.choices[0].message.content) {
          return data.choices[0].message.content.trim();
        } else {
          alert("Failed to get passage from OpenAI. Check your API key or try again.");
          return null;
        }
      } catch (e) {
        alert("Error: " + e.message);
        return null;
      }
    }

    function showWord(idx) {
      rsvpWord.textContent = words[idx] || '';
    }

    function startRSVP() {
      if (!words.length) return;
      paused = false;
      startBtn.disabled = true;
      pauseBtn.disabled = false;
      showPassageBtn.disabled = false;
      if (current === 0) {
        startTime = Date.now();
        resultDiv.textContent = '';
      }
      interval = setInterval(() => {
        if (current < words.length) {
          showWord(current++);
        } else {
          clearInterval(interval);
          endTime = Date.now();
          showResult();
          startBtn.disabled = false;
          pauseBtn.disabled = true;
        }
      }, 60000 / parseInt(wpmInput.value, 10));
    }

    function pauseRSVP() {
      paused = true;
      clearInterval(interval);
      startBtn.disabled = false;
      pauseBtn.disabled = true;
    }

    function showResult() {
      const duration = (endTime - startTime) / 1000;
      const wpm = Math.round((words.length / duration) * 60);
      resultDiv.textContent = `You read ${words.length} words in ${duration.toFixed(1)} seconds. Estimated WPM: ${wpm}`;
    }

    generateBtn.onclick = async () => {
      generateBtn.disabled = true;
      rsvpWord.textContent = 'Loading...';
      resultDiv.textContent = '';
      passageDiv.style.display = 'none';
      showPassageBtn.disabled = true;
      startBtn.disabled = true;
      pauseBtn.disabled = true;
      current = 0;
      words = [];
      passage = await fetchAIPassage();
      if (passage) {
        words = passage.split(/\s+/);
        rsvpWord.textContent = 'Ready!';
        startBtn.disabled = false;
        showPassageBtn.disabled = false;
      } else {
        rsvpWord.textContent = '';
      }
      generateBtn.disabled = false;
    };

    startBtn.onclick = () => {
      if (paused) {
        startRSVP();
      } else {
        current = 0;
        startRSVP();
      }
    };

    pauseBtn.onclick = pauseRSVP;

    showPassageBtn.onclick = () => {
      passageDiv.textContent = passage;
      passageDiv.style.display = 'block';
    };
  </script>
  <div class="container" style="margin-bottom:2rem; margin-top:0;">
    <h2>About This RSVP Reading Speed Test</h2>
    <p>
      <strong>What is RSVP?</strong><br>
      RSVP (Rapid Serial Visual Presentation) is a speed reading technique where words are shown one at a time in quick succession at a fixed location. This method minimizes eye movement and helps you read faster by focusing your attention on a single point.
    </p>
    <p>
      <strong>How does this test work?</strong><br>
      1. <b>Generate Passage:</b> Enter your OpenAI API key and click "Generate Passage" to fetch a random, readable passage.<br>
      2. <b>Set WPM:</b> Choose your desired reading speed in words per minute (WPM).<br>
      3. <b>Start:</b> Click "Start" to begin. Each word will appear one at a time in the center of the screen.<br>
      4. <b>Pause/Resume:</b> You can pause and resume the test at any time.<br>
      5. <b>Show Passage:</b> After or during the test, click "Show Passage" to view the full text.<br>
      6. <b>Result:</b> When finished, your actual reading speed (WPM) and time taken will be displayed.
    </p>
    <p>
      <strong>Why use RSVP?</strong><br>
      RSVP helps you practice reading faster by reducing the time your eyes spend moving between words. It can be a fun way to challenge yourself and measure your reading speed.
    </p>
    <p>
      <strong>Note:</strong> Your OpenAI API key is only used in your browser to generate the passage and is never sent to any third-party server except OpenAI.
    </p>
    <p style="color:#f87171; font-weight:bold;">
      <strong>Important:</strong> This RSVP reading test will <u>not work</u> on GitHub Pages or other static hosting, because OpenAI blocks API requests directly from browsers for security reasons (CORS). You need a backend server to use the OpenAI API.
    </p>
  </div>
</body>
</html>